<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tempmail Pro</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(180deg,#0f172a,#020617);
  color:#fff;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:20px;
}

.app{
  width:100%;
  max-width:420px;
}

.header{
  text-align:center;
  margin-bottom:20px;
}

.header h1{
  margin:0;
  font-size:26px;
  font-weight:700;
}

.card{
  background:rgba(255,255,255,0.06);
  backdrop-filter:blur(12px);
  border-radius:18px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
}

.email-box{
  background:#020617;
  border-radius:14px;
  padding:14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:15px;
}

.email-text{
  font-size:15px;
  word-break:break-all;
}

.copy-btn{
  background:#22c55e;
  color:#000;
  border:none;
  padding:8px 14px;
  border-radius:10px;
  font-weight:600;
}

.tabs{
  display:flex;
  gap:10px;
  margin-bottom:15px;
}

.tabs button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:12px;
  background:#020617;
  color:#fff;
  font-weight:600;
}

.tabs button:active{
  transform:scale(.98);
}

#messages{
  min-height:120px;
}

.message{
  background:#020617;
  padding:12px;
  border-radius:12px;
  margin-bottom:10px;
  font-size:14px;
}

.spinner{
  width:36px;
  height:36px;
  border:4px solid #333;
  border-top:4px solid #22c55e;
  border-radius:50%;
  margin:20px auto;
  animation:spin 1s linear infinite;
}

.hidden{display:none}

@keyframes spin{
  to{transform:rotate(360deg)}
}

.whatsapp{
  margin-top:18px;
  width:100%;
  padding:14px;
  background:#22c55e;
  color:#000;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:700;
}

.footer{
  text-align:center;
  font-size:12px;
  opacity:.6;
  margin-top:14px;
}
</style>
</head>

<body>

<div class="app">
  <div class="header">
    <h1>Tempmail Pro</h1>
  </div>

  <div class="card">
    <div class="email-box">
      <div class="email-text" id="email">loading...</div>
      <button class="copy-btn" onclick="copyEmail()">Copy</button>
    </div>

    <div class="tabs">
      <button onclick="loadInbox()">Inbox</button>
      <button onclick="newMail()">New Mail</button>
    </div>

    <div id="spinner" class="spinner hidden"></div>
    <div id="messages">Your inbox is empty</div>

    <button class="whatsapp" onclick="joinWhatsApp()">
      Join us on WhatsApp
    </button>

    <div class="footer">
      By ï¼´ï¼¥ï¼£ï¼¨ï½œï¼µï¼°ï¼¤ï¼¡ï¼´ï¼¥ï¼³ ðŸ’»ðŸŽ­ â€¢ Temporary emails may be deleted
    </div>
  </div>
</div>

<script>
/* ========= SAME LOGIC AS BEFORE ========= */
const NAMES=[
"john","michael","david","daniel","james","robert","kevin","brian",
"emma","sarah","anna","linda","jessica","mary","nancy","rachel",
"chris","paul","mark","steven","jason","olivia","sophia","mia",
"lucas","noah","liam","ethan","grace","chloe","isabella"
];

let API="mailtm", token="", email="", login="", domain="";

function saveSession(d){localStorage.setItem("tm",JSON.stringify(d))}
function getSession(){return JSON.parse(localStorage.getItem("tm"))}
function newMail(){localStorage.removeItem("tm");location.reload()}

async function createMailTM(){
  try{
    const d=await (await fetch("https://api.mail.tm/domains")).json();
    const dom=d["hydra:member"][0].domain;
    const name=NAMES[Math.floor(Math.random()*NAMES.length)];
    email=`${name}${Math.floor(Math.random()*10000)}@${dom}`;
    const pass="Pass123!";

    await fetch("https://api.mail.tm/accounts",{
      method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({address:email,password:pass})
    });

    const t=await (await fetch("https://api.mail.tm/token",{
      method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({address:email,password:pass})
    })).json();

    token=t.token; API="mailtm";
    saveSession({api:"mailtm",email,token});
    document.getElementById("email").innerText=email;
  }catch{createSecMail()}
}

function createSecMail(){
  const name=NAMES[Math.floor(Math.random()*NAMES.length)];
  login=name+Math.floor(Math.random()*10000);
  domain="1secmail.com"; API="secmail";
  saveSession({api:"secmail",login,domain});
  document.getElementById("email").innerText=`${login}@${domain}`;
}

async function loadInbox(){
  const s=document.getElementById("spinner");
  const box=document.getElementById("messages");
  s.classList.remove("hidden"); box.innerHTML="";

  if(API==="mailtm"){
    const r=await fetch("https://api.mail.tm/messages",
      {headers:{Authorization:"Bearer "+token}});
    const d=await r.json(); s.classList.add("hidden");
    if(!d["hydra:member"].length){box.innerText="No messages";return;}
    d["hydra:member"].forEach(m=>{
      const div=document.createElement("div");
      div.className="message";
      div.innerHTML=`<b>${m.from.address}</b><br>${m.subject}`;
      box.appendChild(div);
    });
  }
}

function copyEmail(){
  navigator.clipboard.writeText(
    document.getElementById("email").innerText
  );
  alert("Email copied");
}

function joinWhatsApp(){
  window.open("https://chat.whatsapp.com/Jd7wg67a9myHb6S4MBgjGM","_blank");
}

window.onload=()=>{
  const s=getSession();
  if(s){
    if(s.api==="mailtm"){API="mailtm";token=s.token;email=s.email;
      document.getElementById("email").innerText=email;}
    else{API="secmail";login=s.login;domain=s.domain;
      document.getElementById("email").innerText=`${login}@${domain}`;}
  }else createMailTM();
};
</script>

</body>
</html>